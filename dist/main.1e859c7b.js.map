{"version":3,"sources":["main.js"],"names":["localSite","JSON","parse","localStorage","getItem","name","logo","url","img","$siteList","$","$lastLi","$modelWrap","$model","isTouchDevice","document","documentElement","manageLogo","site","simplyUrl","replace","renderSite","find","remove","forEach","index","$site","insertBefore","on","e","window","open","stopPropagation","splice","showOrHideAddButton","length","addClass","removeClass","click","val","siteNameVal","trim","siteUrlVal","indexOf","siteImg","setAttribute","onload","push","toUpperCase","render","onerror","attr","removeAttr","onbeforeunload","setItem","stringify","targetName","target","getAttribute","key","toLowerCase"],"mappings":"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","file":"main.1e859c7b.js","sourceRoot":"..\\src","sourcesContent":["const localSite = JSON.parse(localStorage.getItem(\"localSite\")) || [\r\n  { name:'github', logo: \"G\", url: \"https://github.com/\",img:\"https://github.com/favicon.ico\" },\r\n  { name:'b站', logo: \"B\", url: \"https://www.bilibili.com\", img:\"https://www.bilibili.com/favicon.ico\" },\r\n];\r\nlet $siteList = $(\".siteList\");\r\nlet $lastLi = $(\".last\");\r\nconst $modelWrap  = $('.modelWrap');\r\nconst $model = $('.model');\r\n\r\nconst isTouchDevice = \"ontouchstart\" in document.documentElement;\r\n\r\nconst manageLogo = (site) =>{\r\n  if(site.img){\r\n    return `<img src='${site.img}'/>`\r\n  }else{\r\n    return site.logo\r\n  }\r\n}\r\n\r\nconst simplyUrl = (url) => {\r\n  return url\r\n    .replace(\"https://\", \"\")\r\n    .replace(\"http://\", \"\")\r\n    .replace(\"www.\", \"\")\r\n    .replace(/\\/.*/, \"\");\r\n};\r\n\r\nconst renderSite = () => {\r\n  $siteList.find('li:not(\".last\")').remove();\r\n  localSite.forEach((site, index) => {\r\n    let $site = $(`<li>\r\n      <div class=\"site\">\r\n        <div class=\"logo\">${manageLogo(site)}</div>\r\n        <div class=\"link\">${site.name}</div>\r\n        <div class='delete ${isTouchDevice?'':'hide'}'>\r\n          <svg class=\"icon\">\r\n            <use xlink:href=\"#icon-delete\"></use>\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    </li>`).insertBefore($lastLi);\r\n\r\n    $site.on(\"click\", (e) => {\r\n      window.open(site.url);\r\n    });\r\n\r\n    $site.on(\"click\", \".delete\", (e) => {\r\n      e.stopPropagation();\r\n      localSite.splice(index, 1);\r\n      renderSite();\r\n      return;\r\n    });\r\n  });\r\n  showOrHideAddButton()\r\n};\r\n\r\nconst showOrHideAddButton  = () =>{\r\n  if(localSite.length >= 10){\r\n    $(\".last\").addClass('hide')\r\n  }else{\r\n    $(\".last\").removeClass('hide')\r\n  }\r\n}\r\n\r\n$(\".addButton\").on(\"click\", () => {\r\n  $modelWrap.removeClass('hide')\r\n});\r\n\r\n$('.model .cancel-button').click(() => {\r\n  $model.find('input[type=text]').val('')\r\n  $modelWrap.addClass('hide')\r\n})\r\n\r\n$('.model .ensure-button').click(() => {\r\n  let siteNameVal = $('[name=siteName]').val().trim()\r\n  let siteUrlVal = $('[name=siteUrl]').val().trim()\r\n  if(siteUrlVal.indexOf('https://') === -1){\r\n    siteUrlVal = 'https://' + siteUrlVal\r\n  }\r\n\r\n  if(siteUrlVal[siteUrlVal.length - 1] !== '/'){\r\n    siteUrlVal = siteUrlVal + '/'\r\n  }\r\n\r\n  let siteImg = siteUrlVal + 'favicon.ico'\r\n\r\n  //测试图片\r\n  img.setAttribute('src',siteImg);\r\n  img.onload = ()=>{\r\n    localSite.push({\r\n      name:siteNameVal,\r\n      logo: simplyUrl(siteUrlVal)[0].toUpperCase(),\r\n      url: siteUrlVal,\r\n      img: siteImg\r\n    });\r\n    render()\r\n  }\r\n\r\n  img.onerror = ()=>{\r\n    localSite.push({\r\n      name:siteNameVal,\r\n      logo: simplyUrl(siteUrlVal)[0].toUpperCase(),\r\n      url: siteUrlVal\r\n    });\r\n    render()\r\n  }\r\n  \r\n  function render(){\r\n    renderSite();\r\n    $model.find('input[type=text]').val('')\r\n    $modelWrap.addClass('hide')\r\n  }\r\n})\r\n\r\n$model.find('input[type=text]').on('keyup',(e) => {\r\n  let siteNameVal = $('[name=siteName]').val().trim()\r\n  let siteUrlVal = $('[name=siteUrl]').val().trim()\r\n  if(siteNameVal === '' || siteUrlVal === ''){\r\n    $('.ensure-button').attr('disabled',true)\r\n  }else{\r\n    $('.ensure-button').removeAttr(\"disabled\")\r\n  }\r\n})\r\n\r\nrenderSite();\r\n\r\nwindow.onbeforeunload = function () {\r\n  localStorage.setItem(\"localSite\", JSON.stringify(localSite));\r\n};\r\n\r\n$(document).on('keypress',(e) =>{\r\n  let targetName = e.target.getAttribute('name')\r\n  if(targetName === 'wd' || targetName === 'siteName' || targetName === 'siteUrl') return\r\n\r\n  const {key} = e\r\n  localSite.forEach(site => {\r\n    if(site.logo.toLowerCase() === key.toLowerCase()){\r\n      window.open(site.url)\r\n    }\r\n  })\r\n})\r\n"]}